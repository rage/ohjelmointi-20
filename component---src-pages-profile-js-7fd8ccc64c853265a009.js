"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[486],{62138:function(e,t,n){n.d(t,{Z:function(){return T}});var a=n(67294),i=n(85420),r=n(29114),o=n(1097),s=n(48086),l=n(22702),u=n(92206),c=n(87198),d=n(83332),m=n(82441),h=n(94694),p=n(50535),f=n(13578),g=n(77606),v=n(23168),E=n(73935),_=n(40016),k=n(89711),Z=n(90058),C=n(31690),b=n(31295),x=n(58591);const y=(0,p.default)(C.Z).withConfig({displayName:"DropdownMenu__StyledFormControl",componentId:"olaryr-0"})(["width:100%;"]);var w=(0,x.Z)("user")((0,f.Z)((e=>{let{selectedVariant:t,setSelectedVariant:n,t:i}=e;const{0:r,1:o}=(0,a.useState)(0),s=(0,a.useRef)(null);(0,a.useEffect)((()=>{o(E.findDOMNode(s.current).offsetWidth)}));return a.createElement(y,{variant:"outlined"},a.createElement(k.Z,{ref:s,htmlFor:"course-variant-select"},i("whichCourse")),a.createElement(b.Z,{value:t,onChange:e=>{n(e.target.value)},input:a.createElement(_.Z,{labelWidth:r,name:"course-variant",id:"course-variant-select"})},a.createElement(Z.Z,{value:"dl"},"Aikataulutettu Ohjelmoinnin MOOC, Ohjelmoinnin perusteet"),a.createElement(Z.Z,{value:"nodl"},"Aikatauluton Ohjelmoinnin MOOC, Ohjelmoinnin perusteet"),a.createElement(Z.Z,{value:"ohja-dl"},"Aikataulutettu Ohjelmoinnin MOOC, Ohjelmoinnin jatkokurssi"),a.createElement(Z.Z,{value:"ohja-nodl"},"Aikatauluton Ohjelmoinnin MOOC, Ohjelmoinnin jatkokurssi")))}))),O=n(25444);const I=p.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),S=p.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),L=p.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),M=p.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),j=(0,p.default)(g.G).withConfig({displayName:"CourseOptionsEditor__StyledIcon",componentId:"sc-15i8a3h-4"})(["margin-right:0.25rem;"]);class N extends a.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault(),this.setState({submitting:!0});let t={applies_for_study_right:this.state.applies_for_study_right,graduating_next_year:this.state.graduating_next_year,digital_education_for_all:this.state.digital_education_for_all,marketing:this.state.marketing,research:this.state.research,course_variant:this.state.currentCourseVariant};const n={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};await(0,h.ek)({extraFields:t,userField:n}),this.setState({submitting:!1}),this.props.onComplete()},this.state={submitting:!1,error:!0,errorObj:{},applies_for_study_right:!1,graduating_next_year:!1,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=e=>{const t=e.target.name,n=e.target.value;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCheckboxInput=e=>{const t=e.target.name,n=e.target.checked;this.setState({[t]:n},(()=>{this.validate()}))},this.handleFocus=e=>{const t=e.target.name;this.setState({focused:t})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((e=>({error:void 0===e.research})))},this.setSelectedVariant=e=>{this.setState({currentCourseVariant:e})}}async componentDidMount(){var e,t,n,a,i,r,o,s,l;const u=await(0,h.$V)();this.setState({first_name:null===(e=u.user_field)||void 0===e?void 0:e.first_name,last_name:null===(t=u.user_field)||void 0===t?void 0:t.last_name,email:u.email,student_number:null===(n=u.user_field)||void 0===n?void 0:n.organizational_id,applies_for_study_right:"t"===(null===(a=u.extra_fields)||void 0===a?void 0:a.applies_for_study_right),graduating_next_year:"t"===(null===(i=u.extra_fields)||void 0===i?void 0:i.graduating_next_year),digital_education_for_all:"t"===(null===(r=u.extra_fields)||void 0===r?void 0:r.digital_education_for_all),marketing:"t"===(null===(o=u.extra_fields)||void 0===o?void 0:o.marketing),research:null===(s=u.extra_fields)||void 0===s?void 0:s.research,currentCourseVariant:null===(l=u.extra_fields)||void 0===l?void 0:l.course_variant,loading:!1},(()=>{this.validate()}))}render(){return a.createElement(M,null,a.createElement(m.Z,{loading:this.state.loading,heightHint:"490px"},a.createElement(L,null,a.createElement(i.Z,null,a.createElement(r.Z,null,this.props.t("loggedInWith"),this.state.email)))),a.createElement("h1",null,this.props.t("studentInfo")),a.createElement(S,null,a.createElement(L,null,this.props.t("aboutYourself")),a.createElement(m.Z,{loading:this.state.loading,heightHint:"490px"},a.createElement("div",null,a.createElement(I,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(I,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(I,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(I,null,a.createElement(w,{selectedVariant:this.state.currentCourseVariant||this.props.courseVariant||"dl",setSelectedVariant:this.setSelectedVariant})),!this.props.courseVariant&&("nodl"===this.state.currentCourseVariant||"ohja-nodl"===this.state.currentCourseVariant)&&a.createElement(I,null,a.createElement(L,null,a.createElement(i.Z,null,a.createElement(r.Z,null,a.createElement(j,{icon:v.sqG}),"Jos olet vaihtamassa aikataulullisesta kurssista aikatauluttomaan, katso tämä ohje ohjelmointitehtävien pisteiden siirtämiseksi:"," ",a.createElement(O.Link,{to:"/vaihda-aikatauluttomaan"},"Kurssin vaihto aikatauluttomaan versioon"),".")))),a.createElement(I,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.applies_for_study_right,onChange:this.handleCheckboxInput,name:"applies_for_study_right",value:"1"}),label:"Aion hakea aikataulutetun Ohjelmoinnin MOOCin kautta opinto-oikeutta (opiskelupaikkaa) Helsingin yliopistoon."})),this.state.applies_for_study_right&&a.createElement(I,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.graduating_next_year,onChange:this.handleCheckboxInput,name:"graduating_next_year",value:"1"}),label:"Valmistun ja saan yliopistokelpoisuuden vasta keväällä 2021"})),a.createElement(I,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.digital_education_for_all,onChange:this.handleCheckboxInput,name:"digital_education_for_all",value:"1"}),label:"Olen tällä hetkellä opiskelijana Digital Education for All -hankkeessa. Jätä tämä valitsematta mikäli et tiedä kyseisestä hankkeesta."})),a.createElement(I,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",value:"1"}),label:this.props.t("marketing")})))),a.createElement("h2",null,this.props.t("researchTitle")),a.createElement("p",null,this.props.t("research1")),a.createElement("ol",null,a.createElement("li",null,this.props.t("research2")),a.createElement("li",null,this.props.t("research3")),a.createElement("li",null,this.props.t("research4"))),a.createElement("p",null,this.props.t("research5"),a.createElement("a",{href:"https://dl.acm.org/citation.cfm?id=2858798",target:"_blank",rel:"noopener noreferrer"},"Educational Data Mining and Learning Analytics in Programming: Literature Review and Case Studies"),"."),a.createElement("p",null,this.props.t("research6")),a.createElement("p",null,this.props.t("research7")),a.createElement(I,null,a.createElement(m.Z,{loading:this.state.loading,heightHint:"115px"},a.createElement(u.Z,{"aria-label":this.props.t("researchAgree"),name:"research",value:this.state.research,onChange:this.handleInput},a.createElement(s.Z,{value:"1",control:a.createElement(c.Z,{color:"primary"}),label:this.props.t("researchYes")}),a.createElement(s.Z,{value:"0",control:a.createElement(c.Z,null),label:this.props.t("researchNo")})))),a.createElement(I,null,a.createElement(d.Z,{onClick:this.onClick,disabled:this.state.submitting||this.state.error,loading:this.state.submitting,variant:"contained",color:"primary",fullWidth:!0},this.props.t("save")))),this.state.error&&a.createElement(L,null,a.createElement("b",null,this.props.t("fillRequired"))))}}var T=(0,x.Z)("common")((0,f.Z)(N))},88282:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(67294),i=n(35414),r=n(50535),o=n(18435),s=n(62138),l=n(25444),u=n(54021),c=n(86810),d=n(94694),m=n(77606),h=n(23168),p=n(45987),f=n(4942),g=n(87462),v=n(85505),E=n(34621),_=n(381),k=n(73935),Z=n(70703),C=n(11291),b=n(57544);function x(e){return e.substring(2).toLowerCase()}var y=function(e){var t=e.children,n=e.disableReactTree,i=void 0!==n&&n,r=e.mouseEvent,o=void 0===r?"onClick":r,s=e.onClickAway,l=e.touchEvent,u=void 0===l?"onTouchEnd":l,c=a.useRef(!1),d=a.useRef(null),m=a.useRef(!1),h=a.useRef(!1);a.useEffect((function(){return setTimeout((function(){m.current=!0}),0),function(){m.current=!1}}),[]);var p=a.useCallback((function(e){d.current=k.findDOMNode(e)}),[]),f=(0,C.Z)(t.ref,p),g=(0,b.Z)((function(e){var t=h.current;if(h.current=!1,m.current&&d.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(c.current)c.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(d.current)>-1;else n=!(0,Z.Z)(d.current).documentElement.contains(e.target)||d.current.contains(e.target);n||!i&&t||s(e)}})),v=function(e){return function(n){h.current=!0;var a=t.props[e];a&&a(n)}},E={ref:f};return!1!==u&&(E[u]=v(u)),a.useEffect((function(){if(!1!==u){var e=x(u),t=(0,Z.Z)(d.current),n=function(){c.current=!0};return t.addEventListener(e,g),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,g),t.removeEventListener("touchmove",n)}}}),[g,u]),!1!==o&&(E[o]=v(o)),a.useEffect((function(){if(!1!==o){var e=x(o),t=(0,Z.Z)(d.current);return t.addEventListener(e,g),function(){t.removeEventListener(e,g)}}}),[g,o]),a.createElement(a.Fragment,null,a.cloneElement(t,E))},w=n(81664),O=n(88231),I=n(43337),S=n(58063),L=n(37595),M=a.forwardRef((function(e,t){var n=e.action,i=e.classes,r=e.className,o=e.message,s=e.role,l=void 0===s?"alert":s,u=(0,p.Z)(e,["action","classes","className","message","role"]);return a.createElement(S.Z,(0,g.Z)({role:l,square:!0,elevation:6,className:(0,v.Z)(i.root,r),ref:t},u),a.createElement("div",{className:i.message},o),n?a.createElement("div",{className:i.action},n):null)})),j=(0,E.Z)((function(e){var t="light"===e.palette.type?.8:.98,n=(0,L._4)(e.palette.background.default,t);return{root:(0,g.Z)({},e.typography.body2,(0,f.Z)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(M),N=a.forwardRef((function(e,t){var n=e.action,i=e.anchorOrigin,r=(i=void 0===i?{vertical:"bottom",horizontal:"center"}:i).vertical,o=i.horizontal,s=e.autoHideDuration,l=void 0===s?null:s,u=e.children,c=e.classes,d=e.className,m=e.ClickAwayListenerProps,h=e.ContentProps,f=e.disableWindowBlurListener,E=void 0!==f&&f,k=e.message,Z=e.onClose,C=e.onEnter,x=e.onEntered,S=e.onEntering,L=e.onExit,M=e.onExited,N=e.onExiting,T=e.onMouseEnter,F=e.onMouseLeave,R=e.open,V=e.resumeHideDuration,D=e.TransitionComponent,P=void 0===D?I.Z:D,A=e.transitionDuration,W=void 0===A?{enter:_.x9.enteringScreen,exit:_.x9.leavingScreen}:A,H=e.TransitionProps,B=(0,p.Z)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),z=a.useRef(),G=a.useState(!0),U=G[0],q=G[1],Y=(0,b.Z)((function(){Z&&Z.apply(void 0,arguments)})),J=(0,b.Z)((function(e){Z&&null!=e&&(clearTimeout(z.current),z.current=setTimeout((function(){Y(null,"timeout")}),e))}));a.useEffect((function(){return R&&J(l),function(){clearTimeout(z.current)}}),[R,l,J]);var K=function(){clearTimeout(z.current)},X=a.useCallback((function(){null!=l&&J(null!=V?V:.5*l)}),[l,V,J]);return a.useEffect((function(){if(!E&&R)return window.addEventListener("focus",X),window.addEventListener("blur",K),function(){window.removeEventListener("focus",X),window.removeEventListener("blur",K)}}),[E,X,R]),!R&&U?null:a.createElement(y,(0,g.Z)({onClickAway:function(e){Z&&Z(e,"clickaway")}},m),a.createElement("div",(0,g.Z)({className:(0,v.Z)(c.root,c["anchorOrigin".concat((0,w.Z)(r)).concat((0,w.Z)(o))],d),onMouseEnter:function(e){T&&T(e),K()},onMouseLeave:function(e){F&&F(e),X()},ref:t},B),a.createElement(P,(0,g.Z)({appear:!0,in:R,onEnter:(0,O.Z)((function(){q(!1)}),C),onEntered:x,onEntering:S,onExit:L,onExited:(0,O.Z)((function(){q(!0)}),M),onExiting:N,timeout:W,direction:"top"===r?"down":"up"},H),u||a.createElement(j,(0,g.Z)({message:k,action:n},h)))))})),T=(0,E.Z)((function(e){var t={top:8},n={bottom:8},a={justifyContent:"flex-end"},i={justifyContent:"flex-start"},r={top:24},o={bottom:24},s={right:24},l={left:24},u={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:(0,g.Z)({},t,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({},r,u))),anchorOriginBottomCenter:(0,g.Z)({},n,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({},o,u))),anchorOriginTopRight:(0,g.Z)({},t,a,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({left:"auto"},r,s))),anchorOriginBottomRight:(0,g.Z)({},n,a,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({left:"auto"},o,s))),anchorOriginTopLeft:(0,g.Z)({},t,i,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({right:"auto"},r,l))),anchorOriginBottomLeft:(0,g.Z)({},n,i,(0,f.Z)({},e.breakpoints.up("sm"),(0,g.Z)({right:"auto"},o,l)))}}),{flip:!1,name:"MuiSnackbar"})(N);const F=(0,r.default)(j).withConfig({displayName:"profile__StyledSnackbarContent",componentId:"sc-3be922-0"})(["background-color:#43a047 !important;"]),R=(0,r.default)(m.G).withConfig({displayName:"profile__StyledIcon",componentId:"sc-3be922-1"})(["margin-right:0.5rem;"]);class V extends a.Component{constructor(){super(...arguments),this.state={successMessage:null},this.onStepComplete=()=>{this.setState({successMessage:"Tiedot tallennettu!"})},this.handleClose=()=>{this.setState({successMessage:null})}}async componentDidMount(){var e;if(!this.context.loggedIn)return;let t=await(0,d.gb)();void 0===(null==t||null===(e=t.extra_fields)||void 0===e?void 0:e.research)&&(0,l.navigate)("/missing-info")}render(){return this.context.loggedIn?a.createElement(o.Z,null,a.createElement(c.Z,null,a.createElement(i.Z,{title:"Profiili"}),a.createElement("h1",null,"Profiili"),a.createElement("p",null,"Täällä voit muokata mooc.fi -tilisi asetuksia tämän kurssin osalta. Katso myös profiilisi mooc.fi:n Test My Code -palvelussa:"," ",a.createElement("a",{href:"https://tmc.mooc.fi",rel:"noopener noreferrer"},"https://tmc.mooc.fi"),"."),a.createElement(s.Z,{onComplete:this.onStepComplete})),a.createElement(T,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.successMessage,autoHideDuration:6e3,onClose:this.handleClose},a.createElement(F,{variant:"success",message:a.createElement(a.Fragment,null,a.createElement(R,{icon:h.f8k})," ",a.createElement("span",null,this.state.successMessage))}))):("undefined"!=typeof window&&(0,l.navigate)("/sign-in"),a.createElement("div",null,"Redirecting..."))}}V.contextType=u.ZP;var D=(0,u._N)(V)}}]);
//# sourceMappingURL=component---src-pages-profile-js-7fd8ccc64c853265a009.js.map